{% extends "defaultnav.html" %} {% load static %} {% block content %}
<div class="container mt-5">
  <div
    class="card shadow-lg border-0 rounded-4 overflow-hidden transform-on-hover"
  >
    <div
      class="card-header bg-gradient-primary text-white d-flex align-items-center justify-content-between"
      style="background: linear-gradient(135deg, #ff6f61, #6b48ff)"
    >
      <h2
        class="mb-0 d-flex align-items-center text-shadow"
        style="color: #fff5e1"
      >
        <i class="fas fa-file-alt me-2 animate-pulse"></i> Uploaded Notes
      </h2>
      <a
        href="{% url 'upload_notes' %}"
        class="btn btn-light btn-sm text-primary fw-bold"
        >Add New Note <i class="fas fa-plus"></i
      ></a>
    </div>
    <div class="card-body p-4 bg-light">
      {% if notes %}
      <div class="table-responsive">
        <table
          class="table table-striped table-bordered table-hover custom-table"
        >
          <thead class="bg-dark text-white">
            <tr>
              <th class="text-center">#</th>
              <th>Title</th>
              <th>Description</th>
              <th>Category</th>
              <th>Subject</th>
              <th>Uploaded By</th>
              <th>Upload Date</th>
              <th>File</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for note in notes %}
            <tr
              class="animate-fade-in"
              style="animation-delay: {{ forloop.counter0|add:0.1 }}s;"
            >
              <td class="text-center">{{ forloop.counter }}</td>
              <td class="fw-bold text-primary">{{ note.title }}</td>
              <td>{{ note.description|truncatechars:50 }}</td>
              <td>{{ note.category }}</td>
              <td>{{ note.subject_id.subject_name }}</td>
              <td>{{ note.user_id.username }}</td>
              <td>{{ note.upload_date|date:"M d, Y " }}</td>
              <td>
                <a
                  href="{{ note.notes_file.url }}"
                  target="_blank"
                  class="btn btn-success btn-sm rounded-pill"
                >
                  <i class="fas fa-download"></i> Download
                </a>
              </td>
              <td>
                <div class="btn-group">
                  
                  {% if note.note_id %}
                    <a class="btn btn-danger btn-sm rounded-pill" href="{% url 'delete_mynotes' id=note.note_id %}" > Delete</a>
                  {% else %}
                     <span class="text-danger">Invalid Note ID</span>
                  {% endif %}

                  
                  </a>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div
        class="alert alert-info text-center p-5 bg-gradient-info text-white rounded-3"
      >
        <i class="fas fa-info-circle fa-2x"></i> <br />
        You haven't uploaded any notes yet. Start creating your knowledge
        treasure!
      </div>
      {% endif %}
    </div>
  </div>
</div>
<script>
  function confirmDelete(noteId) {
    if (confirm("Are you sure you want to delete this note?")) {
      window.location.href = "#".replace("0", noteId);
    }
  }
</script>
<style>
  .transform-on-hover:hover {
    transform: scale(1.02) translateY(-5px);
    transition: all 0.3s ease-in-out;
  }
  .animate-pulse {
    animation: pulse 1.5s infinite;
  }
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in;
  }
  .custom-table th,
  .custom-table td {
    vertical-align: middle;
  }
  .text-shadow {
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  }
  @keyframes pulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
</style>
{% endblock %}
