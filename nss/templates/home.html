{% extends "nav.html" %} {% load static %} {% block content %}
<div class="container mt-5">
  <!-- Main Header Card -->
  <div
    class="card border-0 shadow-sm rounded-4 mb-4"
    style="animation: fadeIn 0.6s ease-in-out"
  >
    <div
      class="card-header bg-violet text-white d-flex align-items-center justify-content-between rounded-top"
    >
      <h2 class="mb-0"><i class="fas fa-book-open me-2"></i>All Notes</h2>
    </div>
  </div>

  <!-- Notes Grid -->
  {% if notes %}
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for note in notes %}
    <div
      class="col"
      style="animation: slideInUp 0.5s ease-out; animation-delay: calc(0.1s * {{ forloop.counter0 }});"
    >
      <div class="card h-100 border-0 shadow-sm rounded-3 note-card">
        <!-- Card Header -->
        <div class="card-header bg-white border-0 pb-0">
          <div class="d-flex justify-content-between align-items-start">
            <h5 class="card-title mb-1 text-violet">{{ note.title }}</h5>
            <span class="badge bg-amber text-dark">{{ note.category }}</span>
          </div>
          <p class="text-muted small mb-0">
            <i class="fas fa-user me-1"></i>{{ note.user_id.username }}
          </p>
        </div>

        <!-- Card Body -->
        <div class="card-body pt-2">
          <p class="card-text text-muted mb-3">
            {{ note.description|truncatechars:120 }}
          </p>
          <div class="d-flex align-items-center mb-2">
            <i class="fas fa-book me-2 text-violet"></i>
            <span>{{ note.subject_id.subject_name }}</span>
          </div>
          <div class="d-flex align-items-center">
            <i class="fas fa-calendar-alt me-2 text-violet"></i>
            <span>{{ note.upload_date|date:"M d, Y" }}</span>
          </div>
        </div>

        <!-- Card Footer -->
        <div
          class="card-footer bg-white border-0 d-flex justify-content-between align-items-center pt-0"
        >
          <span class="badge bg-light text-dark">
            <i class="fas fa-download me-1"></i>{{ note.download_count }}
          </span>
          {% if user.is_authenticated %}
          <a
            href="{{ note.notes_file.url }}"
            class="btn btn-sm btn-violet rounded-pill px-3"
          >
            <i class="fas fa-download me-1"></i>Download
          </a>
          {% else %}
          <button
            class="btn btn-sm btn-outline-violet rounded-pill px-3"
            data-bs-toggle="modal"
            data-bs-target="#loginModal"
          >
            <i class="fas fa-lock me-1"></i>Login to Download
          </button>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <!-- Empty State -->
  <div
    class="card border-0 shadow-sm rounded-4 mt-4"
    style="animation: fadeIn 0.6s ease-in-out"
  >
    <div class="card-body text-center p-5 bg-light">
      <i
        class="fas fa-lightbulb fa-4x mb-4 text-amber"
        style="animation: pulse 1.5s infinite"
      ></i>
      <h3 class="mb-3">No Notes Available</h3>
      <p class="lead">
        Share your knowledge and bring some color to the community!
      </p>
      <a
        href="{% url 'upload_notes' %}"
        class="btn btn-amber btn-lg mt-3 rounded-pill"
      >
        <i class="fas fa-plus me-2"></i>Upload Your First Note
      </a>
    </div>
  </div>
  {% endif %}
</div>

<!-- Login Modal -->
<div
  class="modal fade"
  id="loginModal"
  tabindex="-1"
  aria-labelledby="loginModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" style="animation: slideInDown 0.4s ease-out">
    <div class="modal-content rounded-4">
      <div class="modal-header bg-violet text-white">
        <h5 class="modal-title" id="loginModalLabel">Login Required</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body text-center py-4">
        <i
          class="fas fa-lock fa-4x text-violet mb-3"
          style="animation: pulse 1.5s infinite"
        ></i>
        <h4>Login to Access Notes</h4>
        <p>Sign in or create an account to download notes.</p>
      </div>
      <div class="modal-footer justify-content-center">
        <a
          href="{% url 'login' %}?next={{ request.path }}"
          class="btn btn-violet px-4 rounded-pill"
        >
          <i class="fas fa-sign-in-alt me-2"></i>Login
        </a>
        <a
          href="{% url 'register' %}"
          class="btn btn-outline-violet px-4 rounded-pill"
        >
          <i class="fas fa-user-plus me-2"></i>Register
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  :root {
    --violet: #6f42c1;
    --dark-violet: #5632a5;
    --amber: #ffc107;
    --text-dark: #2b2d42;
    --bg-light: #f8f9fa;
  }
  .card-header.bg-violet {
    background-color: var(--violet) !important;
  }
  .btn-violet {
    background-color: var(--violet);
    color: #fff;
    border: none;
    transition: all 0.3s ease;
  }
  .btn-violet:hover {
    background-color: var(--dark-violet);
    transform: scale(1.05);
  }
  .btn-outline-violet {
    border-color: var(--violet);
    color: var(--violet);
    transition: all 0.3s ease;
  }
  .btn-outline-violet:hover {
    background-color: var(--violet);
    color: #fff;
    transform: scale(1.05);
  }
  .text-violet {
    color: var(--violet) !important;
  }
  .bg-amber {
    background-color: var(--amber) !important;
  }
  .text-amber {
    color: var(--amber) !important;
  }
  .note-card {
    transition: all 0.3s ease;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }
  .note-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(111, 66, 193, 0.2);
  }
  .badge {
    font-weight: 600;
    padding: 6px 12px;
    transition: all 0.3s ease;
    border-radius: 12px;
  }
  .badge.bg-amber {
    background-color: var(--amber) !important;
    color: var(--text-dark) !important;
  }
  .badge:hover {
    transform: scale(1.05);
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes slideInUp {
    from {
      transform: translateY(20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  @keyframes slideInDown {
    from {
      transform: translateY(-20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  @keyframes pulse {
    0%,
    100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
  }
</style>
{% endblock %}
